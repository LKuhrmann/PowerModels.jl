<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer · PowerModels</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-367975-10', 'auto');
ga('send', 'pageview');
</script><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PowerModels</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="quickguide.html">Getting Started</a></li><li><a class="toctext" href="network-data.html">Network Data Format</a></li><li><a class="toctext" href="result-data.html">Result Data Format</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="formulations.html">Network Formulations</a></li><li><a class="toctext" href="specifications.html">Problem Specifications</a></li><li><span class="toctext">Modeling Components</span><ul><li><a class="toctext" href="model.html">PowerModel</a></li><li><a class="toctext" href="objective.html">Objective</a></li><li><a class="toctext" href="variables.html">Variables</a></li><li><a class="toctext" href="constraints.html">Constraints</a></li></ul></li><li><a class="toctext" href="relaxations.html">Relaxation Schemes</a></li><li><a class="toctext" href="parser.html">File IO</a></li></ul></li><li class="current"><a class="toctext" href="developer.html">Developer</a><ul class="internal"><li><a class="toctext" href="#Variable-and-parameter-naming-scheme-1">Variable and parameter naming scheme</a></li><li><a class="toctext" href="#DistFlow-derivation-1">DistFlow derivation</a></li></ul></li><li><a class="toctext" href="experiment-results.html">Experiment Results</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="developer.html">Developer</a></li></ul><a class="edit-page" href="https://github.com/lanl-ansi/PowerModels.jl/blob/master/docs/src/developer.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Developer</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Developer-Documentation-1" href="#Developer-Documentation-1">Developer Documentation</a></h1><h2><a class="nav-anchor" id="Variable-and-parameter-naming-scheme-1" href="#Variable-and-parameter-naming-scheme-1">Variable and parameter naming scheme</a></h2><h3><a class="nav-anchor" id="Suffixes-1" href="#Suffixes-1">Suffixes</a></h3><ul><li><p><code>_fr</code>: from-side (&#39;i&#39;-node)</p></li><li><p><code>_to</code>: to-side (&#39;j&#39;-node)</p></li></ul><h3><a class="nav-anchor" id="Power-1" href="#Power-1">Power</a></h3><p>Defining power <span>$s = p + j \cdot q$</span> and <span>$sm = |s|$</span></p><ul><li><p><code>s</code>: complex power (VA)</p></li><li><p><code>sm</code>: apparent power (VA)</p></li><li><p><code>p</code>: active power (W)</p></li><li><p><code>q</code>: reactive power (var)</p></li></ul><h3><a class="nav-anchor" id="Voltage-1" href="#Voltage-1">Voltage</a></h3><p>Defining voltage <span>$v = vm \angle va = vr + j \cdot vi$</span>:</p><ul><li><p><code>vm</code>: magnitude of (complex) voltage (V)</p></li><li><p><code>va</code>: angle of complex voltage (rad)</p></li><li><p><code>vr</code>: real part of (complex) voltage (V)</p></li><li><p><code>vi</code>: imaginary part of complex voltage (V)</p></li></ul><h3><a class="nav-anchor" id="Current-1" href="#Current-1">Current</a></h3><p>Defining current <span>$c = cm \angle ca = cr + j \cdot ci$</span>:</p><ul><li><p><code>cm</code>: magnitude of (complex) current (A)</p></li><li><p><code>ca</code>: angle of complex current (rad)</p></li><li><p><code>cr</code>: real part of (complex) current (A)</p></li><li><p><code>ci</code>: imaginary part of complex current (A)</p></li></ul><h3><a class="nav-anchor" id="Voltage-products-1" href="#Voltage-products-1">Voltage products</a></h3><p>Defining voltage product <span>$w = v_i \cdot v_j$</span> then <span>$w = wm \angle wa = wr + j\cdot wi$</span>:</p><ul><li><p><code>wm</code> (short for vvm): magnitude of (complex) voltage products (V<span>$^2$</span>)</p></li><li><p><code>wa</code> (short for vva): angle of complex voltage products (rad)</p></li><li><p><code>wr</code> (short for vvr): real part of (complex) voltage products (V<span>$^2$</span>)</p></li><li><p><code>wi</code> (short for vvi): imaginary part of complex voltage products (V<span>$^2$</span>)</p></li></ul><h3><a class="nav-anchor" id="Current-products-1" href="#Current-products-1">Current products</a></h3><p>Defining current product <span>$cc = c_i \cdot c_j$</span> then <span>$cc = ccm \angle cca = ccr + j\cdot cci$</span>:</p><ul><li><p><code>ccm</code>: magnitude of (complex) current products (A<span>$^2$</span>)</p></li><li><p><code>cca</code>: angle of complex current products (rad)</p></li><li><p><code>ccr</code>: real part of (complex) current products (A<span>$^2$</span>)</p></li><li><p><code>cci</code>: imaginary part of complex current products (A<span>$^2$</span>)</p></li></ul><h3><a class="nav-anchor" id="Transformer-ratio-1" href="#Transformer-ratio-1">Transformer ratio</a></h3><p>Defining complex transformer ratio <span>$t = tm \angle ta = tr + j\cdot ti$</span>:</p><ul><li><p><code>tm</code>: magnitude of (complex) transformer ratio (-)</p></li><li><p><code>ta</code>: angle of complex transformer ratio (rad)</p></li><li><p><code>tr</code>: real part of (complex) transformer ratio (-)</p></li><li><p><code>ti</code>: imaginary part of complex transformer ratio (-)</p></li></ul><h3><a class="nav-anchor" id="Impedance-1" href="#Impedance-1">Impedance</a></h3><p>Defining impedance <span>$z = r + j\cdot x$</span>:</p><ul><li><p><code>r</code>: resistance (<span>$\Omega$</span>)</p></li><li><p><code>x</code>: reactance (<span>$\Omega$</span>)</p></li></ul><h3><a class="nav-anchor" id="Admittance-1" href="#Admittance-1">Admittance</a></h3><p>Defining admittance <span>$y = g + j\cdot b$</span>:</p><ul><li><p><code>g</code>: conductance (<span>$S$</span>)</p></li><li><p><code>b</code>: susceptance (<span>$S$</span>)</p></li></ul><h2><a class="nav-anchor" id="DistFlow-derivation-1" href="#DistFlow-derivation-1">DistFlow derivation</a></h2><h3><a class="nav-anchor" id="For-an-asymmetric-pi-section-1" href="#For-an-asymmetric-pi-section-1">For an asymmetric pi section</a></h3><p>Following notation of <a href="#footnote-1">[1]</a>, but recognizing it derives the SOC BFM without shunts. In a pi-section, part of the total current $ I_{lij}$ at the from side flows through the series impedance, <span>$I ^{s}_{lij}$</span>, part of it flows through the from side shunt admittance $ I^{sh}_{lij}$. Vice versa for the to-side. Indicated by superscripts &#39;s&#39; (series) and &#39;sh&#39; (shunt).</p><ul><li><p>Ohm&#39;s law: <span>$U^{mag}_{j} \angle \theta_{j} = U^{mag}_{i}\angle \theta_{i}  - z^{s}_{lij} \cdot I^{s}_{lij}$</span> <span>$\forall lij$</span></p></li><li><p>KCL at shunts: $ I_{lij} = I^{s}_{lij} + I^{sh}_{lij}$, $ I_{lji} = I^{s}_{lji} + I^{sh}_{lji} $</p></li><li><p>Observing: <span>$I^{s}_{lij} = - I^{s}_{lji}$</span>, $ \vert I^{s}_{lij} \vert = \vert I^{s}_{lji} \vert $</p></li><li><p>Ohm&#39;s law times its own complex conjugate: <span>$(U^{mag}_{j})^2 = (U^{mag}_{i}\angle \theta_{i}  - z^{s}_{lij} \cdot I^{s}_{lij})\cdot (U^{mag}_{i}\angle \theta_{i}  - z^{s}_{lij} \cdot I^{s}_{lij})^*$</span></p></li><li><p>Defining <span>$S^{s}_{lij} = P^{s}_{lij} + j\cdot Q^{s}_{lij} = (U^{mag}_{i}\angle \theta_{i}) \cdot (I^{s}_{lij})^*$</span></p></li><li><p>Working it out <span>$(U^{mag}_{j})^2 = (U^{mag}_{i})^2 - 2 \cdot(r^{s}_{lij} \cdot P^{s}_{lij} + x^{s}_{lij} \cdot Q^{s}_{lij}) $ + $((r^{s}_{lij})^2 + (x^{s}_{lij})^2)\vert I^{s}_{lij} \vert^2$</span></p></li></ul><p>Power flow balance w.r.t. branch <em>total</em> losses</p><ul><li><p>Active power flow:   <span>$P_{lij}$</span> + $ P_{lji} $ = $  g^{sh}_{lij} \cdot (U^{mag}_{i})^2 + r^{s}_{l} \cdot \vert I^{s}_{lij} \vert^2 +  g^{sh}_{lji} \cdot  (U^{mag}_{j})^2 $</p></li><li><p>Reactive power flow: <span>$Q_{lij}$</span> + $ Q_{lji} $ = $ -b^{sh}_{lij} \cdot (U^{mag}_{i})^2 + x^{s}_{l} \cdot \vert I^{s}_{lij} \vert^2  - b^{sh}_{lji} \cdot  (U^{mag}_{j})^2 $</p></li><li><p>Current definition: $ \vert S^{s}_{lij} \vert^2  $ $=(U^{mag}_{i})^2 \cdot \vert I^{s}_{lij} \vert^2 $</p></li></ul><p>Substitution:</p><ul><li><p>Voltage from: <span>$(U^{mag}_{i})^2 \rightarrow w_{i}$</span></p></li><li><p>Voltage to: <span>$(U^{mag}_{j})^2 \rightarrow w_{j}$</span></p></li><li><p>Series current : <span>$\vert I^{s}_{lij} \vert^2 \rightarrow l^{s}_{l}$</span></p></li></ul><p>Note that <span>$l^{s}_{l}$</span> represents squared magnitude of the <em>series</em> current, i.e. the current flow through the series impedance in the pi-model.</p><p>Power flow balance w.r.t. branch <em>total</em> losses</p><ul><li><p>Active power flow:   <span>$P_{lij}$</span> + $ P_{lji} $ = $  g^{sh}_{lij} \cdot w_{i} + r^{s}_{l} \cdot l^{s}_{l} +  g^{sh}_{lji} \cdot  w_{j} $</p></li><li><p>Reactive power flow: <span>$Q_{lij}$</span> + $ Q_{lji} $ = $ -b^{sh}_{lij} \cdot w_{i} + x^{s}_{l} \cdot l^{s}_{l}  - b^{sh}_{lji} \cdot  w_{j} $</p></li></ul><p>Power flow balance w.r.t. branch <em>series</em> losses:</p><ul><li><p>Series active power flow : <span>$P^{s}_{lij} + P^{s}_{lji}$</span> $ = r^{s}_{l} \cdot l^{s}_{l} $</p></li><li><p>Series reactive power flow: <span>$Q^{s}_{lij} + Q^{s}_{lji}$</span> $ = x^{s}_{l} \cdot l^{s}_{l} $</p></li></ul><p>Valid equality to link <span>$w_{i}, l_{lij}, P^{s}_{lij}, Q^{s}_{lij}$</span>:</p><ul><li><p>Nonconvex current definition: <span>$(P^{s}_{lij})^2$</span> + <span>$(Q^{s}_{lij})^2$</span>  $=w_{i} \cdot l_{lij} $</p></li><li><p>SOC current definition: <span>$(P^{s}_{lij})^2$</span> + <span>$(Q^{s}_{lij})^2$</span>  <span>$\leq$</span> $ w_{i} \cdot l_{lij} $</p></li></ul><h3><a class="nav-anchor" id="Adding-an-ideal-transformer-1" href="#Adding-an-ideal-transformer-1">Adding an ideal transformer</a></h3><p>Adding an ideal transformer at the from side implicitly creates an internal branch voltage, between the transformer and the pi-section.</p><ul><li><p>new voltage: <span>$w^{&#39;}_{l}$</span></p></li><li><p>ideal voltage magnitude transformer: <span>$w^{&#39;}_{l} = \frac{w_{i}}{(t^{mag})^2}$</span></p></li></ul><p>W.r.t to the pi-section only formulation, we effectively perform the following substitution in all the equations above:</p><ul><li><p>$ w_{i} \rightarrow \frac{w_{i}}{(t^{mag})^2}$</p></li></ul><p>The branch&#39;s power balance isn&#39;t otherwise impacted by adding the ideal transformer, as such transformer is lossless.</p><h3><a class="nav-anchor" id="Adding-total-current-limits-1" href="#Adding-total-current-limits-1">Adding total current limits</a></h3><ul><li><p>Total current from: $ \vert I_{lij} \vert \leq I^{rated}_{l}$</p></li><li><p>Total current to: $ \vert I_{lji} \vert \leq I^{rated}_{l}$</p></li></ul><p>In squared voltage magnitude variables:</p><ul><li><p>Total current from: $ (P_{lij})^2$ + <span>$(Q_{lij})^2  \leq (I^{rated}_{l})^2 \cdot  w_{i}$</span></p></li><li><p>Total current to: $ (P_{lji})^2$ + <span>$(Q_{lji})^2  \leq (I^{rated}_{l})^2 \cdot w_{j}$</span></p></li></ul><p><a href="#footnote-1">[1]</a> Gan, L., Li, N., Topcu, U., &amp; Low, S. (2012). Branch flow model for radial networks: convex relaxation. 51st IEEE Conference on Decision and Control, 1–8. Retrieved from http://smart.caltech.edu/papers/ExactRelaxation.pdf</p><footer><hr/><a class="previous" href="parser.html"><span class="direction">Previous</span><span class="title">File IO</span></a><a class="next" href="experiment-results.html"><span class="direction">Next</span><span class="title">Experiment Results</span></a></footer></article></body></html>
